## 记忆系统

### 记忆系统能帮你什么
- **记住重点**：从聊天总结对于概念和事物的记忆
- **会联想**：相关的主题会自动建立联系，后续对话能更容易“想起来”。
- **会自我打理**：定时学习新内容、忘掉不重要的，对新信息进行整合。

## 我可以怎么自定义
所有设置都在 `config/bot_config.toml` 的 `[memory]` 部分。

- **开关**
  - `enable_memory`: 开启/关闭整个记忆系统。
  - `enable_instant_memory`: 开启/关闭即时记忆（逐条判断是否值得存一条记忆）。（这是一个测试功能，并不稳定）

- **学习（学多少、学多久学一次）**
  - `memory_build_interval`：隔多久学习一次（秒）。数值小=更勤奋，可能更“话痨”。
  - `memory_build_frequency`：构建记忆的频率，这个值越高，构建越频繁
  - `memory_compress_rate`：压缩力度。高一点=主题提得多，可能更啰嗦；低一点=更精炼。
  - `memory_ban_words`：不想被当成记忆的词（例如：表情包、图片等）。

- **遗忘（忘的快不快、忘多少）**
  - `forget_memory_interval`：隔多久执行一次“遗忘”。
  - `memory_forget_time`：很久没用到的“连接”会被当作旧了，这里设置“多久算旧”。
  - `memory_forget_percentage`：每次只抽一部分来检查，比例越大，每次清理越多。

### 建议示例（可按需微调）

```toml
[memory]
enable_memory = true # 是否启用记忆系统
memory_build_frequency = 1 # 记忆构建频率 越高，麦麦学习越多
memory_compress_rate = 0.1 # 记忆压缩率 控制记忆精简程度 建议保持默认,调高可以获得更多信息，但是冗余信息也会增多

forget_memory_interval = 3000 # 记忆遗忘间隔 单位秒   间隔越低，麦麦遗忘越频繁，记忆更精简，但更难学习
memory_forget_time = 48 #多长时间后的记忆会被遗忘 单位小时
memory_forget_percentage = 0.008 # 记忆遗忘比例 控制记忆遗忘程度 越大遗忘越多 建议保持默认

enable_instant_memory = false # 是否启用即时记忆，测试功能，可能存在未知问题

#不希望记忆的词，已经记忆的不会受到影响，需要手动清理
memory_ban_words = [ "表情包", "图片", "回复", "聊天记录" ]
```


## 小建议
- 想“多学一点”：
  - 稍微提高 `memory_build_frequency` ，但是可能会增加token的消费

## 常见疑问
- **为什么感觉没记住？**
  - 可能还没到下一次学习周期，或这段内容没有被记忆。
- **即时记忆和长期记忆有什么不同？**
  - 即时记忆偏“随手记一笔”，适合短期事项；长期记忆是“主题-摘要-连接”的结构化图，更适合被后续关键词激活与联想。


